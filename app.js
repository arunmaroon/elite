// ============================================
// COMBO DATA
// ============================================

const combosData = [
  {
    id: 'PR01',
    title: 'Cast Iron Combo PR01',
    description: 'Kadai 9" + Dosa Tawa Long Handle + Skillet 6"',
    price: '2,499',
    features: [
      'Kadai 9"',
      'Dosa Tawa Long Handle',
      'Skillet 6"'
    ],
    image: 'https://i.pinimg.com/1200x/fa/9b/d3/fa9bd31625c785376f341cb3d2e75c0a.jpg',
    images: [
      'https://i.pinimg.com/1200x/fa/9b/d3/fa9bd31625c785376f341cb3d2e75c0a.jpg',
      'https://i.pinimg.com/736x/4e/b1/fe/4eb1fef8da7c6b1836d4a45038825168.jpg',
      'https://i.pinimg.com/736x/dc/3a/1e/dc3a1ef114c3b8d3539d8adb7cdc211b.jpg',
      'https://i.pinimg.com/1200x/a6/75/25/a6752574fe1bfe4737f164f93153ea94.jpg',
      'https://i.pinimg.com/736x/92/ec/41/92ec413a5eabfb122287f5ea56bda841.jpg'
    ],
    whatsappMessage: 'Hi Elite Kitchen, I\'m interested in PR01 - Kadai 9" + Dosa Tawa Long Handle + Skillet 6". Could you provide more details and pricing? üì¶'
  },
  {
    id: 'PR02',
    title: 'Cast Iron Combo PR02',
    description: 'Dosa Tawa 12" + Panniyarakkal 12 Pits + Mulbagal Tawa 9"',
    price: '2,299',
    features: [
      'Dosa Tawa 12"',
      'Panniyarakkal 12 Pits',
      'Mulbagal Tawa 9"'
    ],
    image: 'https://i.pinimg.com/736x/4e/b1/fe/4eb1fef8da7c6b1836d4a45038825168.jpg',
    images: [
      'https://i.pinimg.com/736x/4e/b1/fe/4eb1fef8da7c6b1836d4a45038825168.jpg',
      'https://i.pinimg.com/1200x/fa/9b/d3/fa9bd31625c785376f341cb3d2e75c0a.jpg',
      'https://i.pinimg.com/736x/dc/3a/1e/dc3a1ef114c3b8d3539d8adb7cdc211b.jpg',
      'https://i.pinimg.com/1200x/a6/75/25/a6752574fe1bfe4737f164f93153ea94.jpg',
      'https://i.pinimg.com/736x/92/ec/41/92ec413a5eabfb122287f5ea56bda841.jpg'
    ],
    whatsappMessage: 'Hi Elite Kitchen, I\'m interested in PR02 - Dosa Tawa 12" + Panniyarakkal 12 Pits + Mulbagal Tawa 9". Could you provide more details and pricing? üì¶'
  },
  {
    id: 'PR03',
    title: 'Cast Iron Combo PR03',
    description: 'Neer Dosa Tawa 12" + Appachetty + Kadai 7"',
    price: '1,899',
    features: [
      'Neer Dosa Tawa 12"',
      'Appachetty',
      'Kadai 7"'
    ],
    image: 'https://i.pinimg.com/736x/dc/3a/1e/dc3a1ef114c3b8d3539d8adb7cdc211b.jpg',
    images: [
      'https://i.pinimg.com/736x/dc/3a/1e/dc3a1ef114c3b8d3539d8adb7cdc211b.jpg',
      'https://i.pinimg.com/1200x/fa/9b/d3/fa9bd31625c785376f341cb3d2e75c0a.jpg',
      'https://i.pinimg.com/736x/4e/b1/fe/4eb1fef8da7c6b1836d4a45038825168.jpg',
      'https://i.pinimg.com/1200x/a6/75/25/a6752574fe1bfe4737f164f93153ea94.jpg',
      'https://i.pinimg.com/736x/92/ec/41/92ec413a5eabfb122287f5ea56bda841.jpg'
    ],
    whatsappMessage: 'Hi Elite Kitchen, I\'m interested in PR03 - Neer Dosa Tawa 12" + Appachetty + Kadai 7". Could you provide more details and pricing? üì¶'
  },
  {
    id: 'PR04',
    title: 'Cast Iron Combo PR04',
    description: 'Mulbagal Tawa 9" + Omlette Tawa + Tadka Pan',
    price: '3,299',
    features: [
      'Mulbagal Tawa 9"',
      'Omlette Tawa',
      'Tadka Pan'
    ],
    image: 'https://i.pinimg.com/1200x/a6/75/25/a6752574fe1bfe4737f164f93153ea94.jpg',
    images: [
      'https://i.pinimg.com/1200x/a6/75/25/a6752574fe1bfe4737f164f93153ea94.jpg',
      'https://i.pinimg.com/1200x/fa/9b/d3/fa9bd31625c785376f341cb3d2e75c0a.jpg',
      'https://i.pinimg.com/736x/4e/b1/fe/4eb1fef8da7c6b1836d4a45038825168.jpg',
      'https://i.pinimg.com/736x/dc/3a/1e/dc3a1ef114c3b8d3539d8adb7cdc211b.jpg',
      'https://i.pinimg.com/736x/92/ec/41/92ec413a5eabfb122287f5ea56bda841.jpg'
    ],
    whatsappMessage: 'Hi Elite Kitchen, I\'m interested in PR04 - Mulbagal Tawa 9" + Omlette Tawa + Tadka Pan. Could you provide more details and pricing? üì¶'
  },
  {
    id: 'PR05',
    title: 'Triply Combo PR05',
    description: 'Triply Kadai 22cm + Triply Frypan 22cm + Triply Sauce Pan 16cm',
    price: '3,599',
    features: [
      'Triply Kadai 22cm',
      'Triply Frypan 22cm',
      'Triply Sauce Pan 16cm'
    ],
    image: 'https://i.pinimg.com/736x/92/ec/41/92ec413a5eabfb122287f5ea56bda841.jpg',
    images: [
      'https://i.pinimg.com/736x/92/ec/41/92ec413a5eabfb122287f5ea56bda841.jpg',
      'https://i.pinimg.com/1200x/fa/9b/d3/fa9bd31625c785376f341cb3d2e75c0a.jpg',
      'https://i.pinimg.com/736x/4e/b1/fe/4eb1fef8da7c6b1836d4a45038825168.jpg',
      'https://i.pinimg.com/736x/dc/3a/1e/dc3a1ef114c3b8d3539d8adb7cdc211b.jpg',
      'https://i.pinimg.com/1200x/a6/75/25/a6752574fe1bfe4737f164f93153ea94.jpg'
    ],
    whatsappMessage: 'Hi Elite Kitchen, I\'m interested in PR05 - Triply Kadai 22cm + Triply Frypan 22cm + Triply Sauce Pan 16cm. Could you provide more details and pricing? üì¶'
  },
  {
    id: 'PR06',
    title: 'Triply Combo PR06',
    description: 'Honey Comb Kadai 20cm + Fry Pan 20cm + Chapathi tawa 25 cm',
    price: '4,199',
    features: [
      'Honey Comb Kadai 20cm',
      'Fry Pan 20cm',
      'Chapathi tawa 25 cm'
    ],
    image: 'https://i.pinimg.com/1200x/4b/27/0e/4b270ebf10fd8909ec9d0692a20d2bd1.jpg',
    images: [
      'https://i.pinimg.com/1200x/4b/27/0e/4b270ebf10fd8909ec9d0692a20d2bd1.jpg',
      'https://i.pinimg.com/1200x/fa/9b/d3/fa9bd31625c785376f341cb3d2e75c0a.jpg',
      'https://i.pinimg.com/736x/4e/b1/fe/4eb1fef8da7c6b1836d4a45038825168.jpg',
      'https://i.pinimg.com/736x/dc/3a/1e/dc3a1ef114c3b8d3539d8adb7cdc211b.jpg',
      'https://i.pinimg.com/1200x/a6/75/25/a6752574fe1bfe4737f164f93153ea94.jpg'
    ],
    whatsappMessage: 'Hi Elite Kitchen, I\'m interested in PR06 - Honey Comb Kadai 20cm + Fry Pan 20cm + Chapathi tawa 25 cm. Could you provide more details and pricing? üì¶'
  },
  {
    id: 'PR07',
    title: 'Winter Combi PR07',
    description: 'Casserole Hotbox 1000ml + 2000ml + 3000ml',
    price: '2,799',
    features: [
      'Casserole Hotbox 1000ml',
      'Casserole Hotbox 2000ml',
      'Casserole Hotbox 3000ml'
    ],
    image: 'https://i.pinimg.com/736x/a2/c5/1d/a2c51d9344816eab8fd698defd07a55e.jpg',
    images: [
      'https://i.pinimg.com/736x/a2/c5/1d/a2c51d9344816eab8fd698defd07a55e.jpg',
      'https://i.pinimg.com/1200x/fa/9b/d3/fa9bd31625c785376f341cb3d2e75c0a.jpg',
      'https://i.pinimg.com/736x/4e/b1/fe/4eb1fef8da7c6b1836d4a45038825168.jpg',
      'https://i.pinimg.com/736x/dc/3a/1e/dc3a1ef114c3b8d3539d8adb7cdc211b.jpg',
      'https://i.pinimg.com/1200x/a6/75/25/a6752574fe1bfe4737f164f93153ea94.jpg'
    ],
    whatsappMessage: 'Hi Elite Kitchen, I\'m interested in PR07 - Casserole Hotbox 1000ml + 2000ml + 3000ml. Could you provide more details and pricing? üì¶'
  },
  {
    id: 'PR08',
    title: 'Pressure Cooker PR08',
    description: 'Triply 10 litre cooker',
    price: '3,899',
    features: [
      'Triply Construction',
      '10 Litre Capacity',
      'Premium Quality'
    ],
    image: 'https://i.pinimg.com/1200x/90/94/7e/90947e79a9d0db1e7dfba3f5ae42d0fb.jpg',
    images: [
      'https://i.pinimg.com/1200x/90/94/7e/90947e79a9d0db1e7dfba3f5ae42d0fb.jpg',
      'https://i.pinimg.com/1200x/fa/9b/d3/fa9bd31625c785376f341cb3d2e75c0a.jpg',
      'https://i.pinimg.com/736x/4e/b1/fe/4eb1fef8da7c6b1836d4a45038825168.jpg',
      'https://i.pinimg.com/736x/dc/3a/1e/dc3a1ef114c3b8d3539d8adb7cdc211b.jpg',
      'https://i.pinimg.com/1200x/a6/75/25/a6752574fe1bfe4737f164f93153ea94.jpg'
    ],
    whatsappMessage: 'Hi Elite Kitchen, I\'m interested in PR08 - Triply 10 litre cooker. Could you provide more details and pricing? üì¶'
  },
  {
    id: 'PR09',
    title: 'Travel Combi PR09',
    description: 'Elito Multi kettle 1.5 ltr + 5000ml hot box',
    price: '2,199',
    features: [
      'Elito Multi kettle 1.5 ltr',
      '5000ml hot box',
      'Travel-Friendly'
    ],
    image: 'https://i.pinimg.com/1200x/fa/9b/d3/fa9bd31625c785376f341cb3d2e75c0a.jpg',
    images: [
      'https://i.pinimg.com/1200x/fa/9b/d3/fa9bd31625c785376f341cb3d2e75c0a.jpg',
      'https://i.pinimg.com/736x/4e/b1/fe/4eb1fef8da7c6b1836d4a45038825168.jpg',
      'https://i.pinimg.com/736x/dc/3a/1e/dc3a1ef114c3b8d3539d8adb7cdc211b.jpg',
      'https://i.pinimg.com/1200x/a6/75/25/a6752574fe1bfe4737f164f93153ea94.jpg',
      'https://i.pinimg.com/736x/92/ec/41/92ec413a5eabfb122287f5ea56bda841.jpg'
    ],
    whatsappMessage: 'Hi Elite Kitchen, I\'m interested in PR09 - Elito Multi kettle 1.5 ltr + 5000ml hot box. Could you provide more details and pricing? üì¶'
  },
  {
    id: 'PR10',
    title: 'Aptiva Stove PR10',
    description: 'Aptiva SS stove 2 burner Jumbo + large burner',
    price: '4,499',
    features: [
      'Stainless Steel Build',
      '2 Burner Jumbo',
      'Large Burner'
    ],
    image: 'https://i.pinimg.com/736x/4e/b1/fe/4eb1fef8da7c6b1836d4a45038825168.jpg',
    images: [
      'https://i.pinimg.com/736x/4e/b1/fe/4eb1fef8da7c6b1836d4a45038825168.jpg',
      'https://i.pinimg.com/1200x/fa/9b/d3/fa9bd31625c785376f341cb3d2e75c0a.jpg',
      'https://i.pinimg.com/736x/dc/3a/1e/dc3a1ef114c3b8d3539d8adb7cdc211b.jpg',
      'https://i.pinimg.com/1200x/a6/75/25/a6752574fe1bfe4737f164f93153ea94.jpg',
      'https://i.pinimg.com/736x/92/ec/41/92ec413a5eabfb122287f5ea56bda841.jpg'
    ],
    whatsappMessage: 'Hi Elite Kitchen, I\'m interested in PR10 - Aptiva SS stove 2 burner Jumbo + large burner. Could you provide more details and pricing? üì¶'
  },
  {
    id: 'PR11',
    title: 'Glass Top Stove PR11',
    description: 'Innovative Glass Top Sleek Stove 2 Burner Jumbo + Large',
    price: '5,299',
    features: [
      'Glass Top Design',
      '2 Burner Jumbo',
      'Large Burner'
    ],
    image: 'https://i.pinimg.com/736x/dc/3a/1e/dc3a1ef114c3b8d3539d8adb7cdc211b.jpg',
    images: [
      'https://i.pinimg.com/736x/dc/3a/1e/dc3a1ef114c3b8d3539d8adb7cdc211b.jpg',
      'https://i.pinimg.com/1200x/fa/9b/d3/fa9bd31625c785376f341cb3d2e75c0a.jpg',
      'https://i.pinimg.com/736x/4e/b1/fe/4eb1fef8da7c6b1836d4a45038825168.jpg',
      'https://i.pinimg.com/1200x/a6/75/25/a6752574fe1bfe4737f164f93153ea94.jpg',
      'https://i.pinimg.com/736x/92/ec/41/92ec413a5eabfb122287f5ea56bda841.jpg'
    ],
    whatsappMessage: 'Hi Elite Kitchen, I\'m interested in PR11 - Innovative Glass Top Sleek Stove 2 Burner Jumbo + Large. Could you provide more details and pricing? üì¶'
  }
];

// ============================================
// CATEGORY DATA
// ============================================

const categoriesData = [
  {
    id: 'cat1',
    title: 'Cookware',
    description: 'Premium pots, pans, and cooking vessels',
    itemCount: '25+ Items',
    image: 'https://images.unsplash.com/photo-1556910103-1c02745aae4d?w=800&h=600&fit=crop'
  },
  {
    id: 'cat2',
    title: 'Cast Iron Collection',
    description: 'Authentic cast iron cookware for traditional cooking',
    itemCount: '15+ Items',
    image: 'https://images.unsplash.com/photo-1588168333984-ff9c9b4aad09?w=800&h=600&fit=crop'
  },
  {
    id: 'cat3',
    title: 'Triply Cookware',
    description: 'Premium triply construction for superior heat distribution',
    itemCount: '20+ Items',
    image: 'https://images.unsplash.com/photo-1556911220-e15b29be4c4b?w=800&h=600&fit=crop'
  },
  {
    id: 'cat4',
    title: 'Storage & Hotboxes',
    description: 'Casserole and hotboxes for keeping food warm',
    itemCount: '12+ Items',
    image: 'https://images.unsplash.com/photo-1556911220-bff31c812dba?w=800&h=600&fit=crop'
  },
  {
    id: 'cat5',
    title: 'Pressure Cookers',
    description: 'Efficient and safe pressure cooking solutions',
    itemCount: '8+ Items',
    image: 'https://images.unsplash.com/photo-1556911220-e15b29be4c4b?w=800&h=600&fit=crop'
  },
  {
    id: 'cat6',
    title: 'Travel Essentials',
    description: 'Portable kettles and travel-friendly cookware',
    itemCount: '10+ Items',
    image: 'https://images.unsplash.com/photo-1556911220-bff31c812dba?w=800&h=600&fit=crop'
  },
  {
    id: 'cat7',
    title: 'Stoves & Burners',
    description: 'Premium stoves for modern kitchens',
    itemCount: '6+ Items',
    image: 'https://images.unsplash.com/photo-1556911220-bff31c812dba?w=800&h=600&fit=crop'
  },
  {
    id: 'cat8',
    title: 'Kitchen Accessories',
    description: 'Essential kitchen tools and accessories',
    itemCount: '30+ Items',
    image: 'https://images.unsplash.com/photo-1556911220-e15b29be4c4b?w=800&h=600&fit=crop'
  }
];

// ============================================
// TESTIMONIALS DATA
// ============================================

const testimonialsData = [
  {
    id: 'test1',
    rating: 5,
    quote: 'Absolutely love the Cast Iron Premium Set! Quality is exceptional and the price is unbeatable. Best purchase I\'ve made for my kitchen!',
    author: 'Sarah Johnson',
    location: 'Bangalore, India',
    image: 'https://i.pravatar.cc/150?img=1'
  },
  {
    id: 'test2',
    rating: 5,
    quote: 'The triply cookware has completely changed how I cook. Everything heats evenly, and cleanup is a breeze. Highly recommend!',
    author: 'Rajesh Kumar',
    location: 'Mumbai, India',
    image: 'https://i.pravatar.cc/150?img=2'
  },
  {
    id: 'test3',
    rating: 5,
    quote: 'Premium quality at these prices? Unreal! The Winter Combi Hotbox Set is stunning and keeps food warm for hours. Will definitely buy more!',
    author: 'Priya Sharma',
    location: 'Delhi, India',
    image: 'https://i.pravatar.cc/150?img=3'
  },
  {
    id: 'test4',
    rating: 4.5,
    quote: 'Great products overall. The Travel Combi Set is perfect for our family trips. Delivery was quick too!',
    author: 'Amit Patel',
    location: 'Ahmedabad, India',
    image: 'https://i.pravatar.cc/150?img=4'
  },
  {
    id: 'test5',
    rating: 5,
    quote: 'Your customer service was amazing! They helped me choose the perfect combo for my needs. Very satisfied with everything!',
    author: 'Anjali Desai',
    location: 'Pune, India',
    image: 'https://i.pravatar.cc/150?img=5'
  },
  {
    id: 'test6',
    rating: 5,
    quote: 'Finally found a brand that offers both quality and value. The Aptiva SS Stove is perfect for my kitchen!',
    author: 'Vikram Singh',
    location: 'Chennai, India',
    image: 'https://i.pravatar.cc/150?img=6'
  }
];

// ============================================
// UTILITY FUNCTIONS
// ============================================

function smoothScroll(target) {
  const element = document.querySelector(target);
  if (element) {
    const offset = window.innerWidth <= 768 ? 70 : 90;
    const elementPosition = element.getBoundingClientRect().top;
    const offsetPosition = elementPosition + window.pageYOffset - offset;

    window.scrollTo({
      top: offsetPosition,
      behavior: 'smooth'
    });
  }
}

function generateWhatsAppLink(message) {
  const phoneNumber = '+919876543210'; // Update with actual number
  const encodedMessage = encodeURIComponent(message);
  return `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
}

// ============================================
// RENDER FUNCTIONS
// ============================================

function renderCombos() {
  const grid = document.getElementById('combosGrid');
  if (!grid) return;

  grid.innerHTML = combosData.map((combo, index) => `
    <div class="combo-card" data-observe style="transition-delay: ${index * 50}ms">
      <div class="combo-card__image-wrapper" onclick="openProductModal('${combo.id}')">
        <img src="${combo.image}" alt="${combo.title}" class="combo-card__image" loading="lazy">
        <div class="combo-card__image-overlay"></div>
        <div class="combo-card__badge">${combo.id}</div>
      </div>
      <div class="combo-card__content">
        <div>
          <h3 class="combo-card__title">${combo.title}</h3>
          <p class="combo-card__description">${combo.description}</p>
          <div class="combo-card__price">Starting at ‚Çπ${combo.price}</div>
        </div>
        <div class="combo-card__actions">
          <button class="combo-card__cta combo-card__cta--secondary" onclick="event.stopPropagation(); openProductModal('${combo.id}')">
            <span>View Details</span>
          </button>
          <a href="${generateWhatsAppLink(combo.whatsappMessage)}" 
             target="_blank" 
             rel="noopener noreferrer"
             class="combo-card__cta combo-card__cta--primary" 
             onclick="event.stopPropagation()">
            <span>Buy Now</span>
          </a>
        </div>
      </div>
    </div>
  `).join('');

  // Trigger animation observer
  observeElements();
}

function renderCategories() {
  const grid = document.getElementById('categoriesGrid');
  if (!grid) return;

  // Select 4 main categories for the grid
  const mainCategories = categoriesData.slice(0, 4);

  grid.innerHTML = mainCategories.map((category, index) => `
    <div class="category-card-new" data-observe style="transition-delay: ${index * 100}ms">
      <img src="${category.image}" alt="${category.title}" class="category-card-new__image" loading="lazy">
      <h3 class="category-card-new__title">${category.title}</h3>
      <p class="category-card-new__description">${category.description}</p>
      <a href="#combos" class="category-card-new__link" onclick="smoothScroll('#combos')">
        Explore category
      </a>
    </div>
  `).join('');

  // Trigger animation observer
  observeElements();
}

function renderBestsellers() {
  const grid = document.getElementById('bestsellersGrid');
  if (!grid) return;

  // Select top 4 combos as bestsellers
  const bestsellers = combosData.slice(0, 4);

  grid.innerHTML = bestsellers.map((combo, index) => `
    <div class="bestseller-card" data-observe style="transition-delay: ${index * 100}ms" onclick="window.open('${generateWhatsAppLink(combo.whatsappMessage)}', '_blank')">
      <span class="bestseller-card__tag">${combo.id}</span>
      <img src="${combo.image}" alt="${combo.title}" class="bestseller-card__image" loading="lazy">
      <h3 class="bestseller-card__name">${combo.title}</h3>
      <p class="bestseller-card__description">${combo.description}</p>
      <div class="bestseller-card__price">‚Çπ${combo.price}</div>
    </div>
  `).join('');

  // Trigger animation observer
  observeElements();
}

function renderTestimonials() {
  const grid = document.getElementById('testimonialsGrid');
  if (!grid) return;

  grid.innerHTML = testimonialsData.map((testimonial, index) => `
    <div class="testimonial-card" data-observe style="transition-delay: ${index * 100}ms">
      <div class="testimonial-card__rating">
        ${'‚≠ê'.repeat(Math.floor(testimonial.rating))}${testimonial.rating % 1 !== 0 ? '‚òÜ' : ''}
      </div>
      <p class="testimonial-card__quote">"${testimonial.quote}"</p>
      <div class="testimonial-card__author">
        <img src="${testimonial.image}" alt="${testimonial.author}" class="testimonial-card__avatar" loading="lazy">
        <div class="testimonial-card__info">
          <div class="testimonial-card__name">${testimonial.author}</div>
          <div class="testimonial-card__location">${testimonial.location}</div>
        </div>
      </div>
    </div>
  `).join('');

  observeElements();
}

// ============================================
// INTERSECTION OBSERVER
// ============================================

function observeElements() {
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
        // Also add visible class to section headers
        if (entry.target.closest('.section-header')) {
          entry.target.closest('.section-header')?.classList.add('visible');
        }
      }
    });
  }, {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  });

  document.querySelectorAll('[data-observe]').forEach(el => {
    observer.observe(el);
  });
}


// ============================================
// NAVIGATION FUNCTIONALITY
// ============================================

function initNavigation() {
  const hamburger = document.getElementById('hamburger');
  const menu = document.getElementById('navbarMenu');
  const navLinks = document.querySelectorAll('.navbar__link');
  const navbar = document.getElementById('navbar');

  // Hamburger menu toggle
  const glassMenu = document.querySelector('.navbar__glass');
  if (hamburger && glassMenu) {
    hamburger.addEventListener('click', (e) => {
      e.stopPropagation();
      hamburger.classList.toggle('active');
      glassMenu.classList.toggle('mobile-menu');
      glassMenu.classList.toggle('active');
      document.body.style.overflow = glassMenu.classList.contains('active') ? 'hidden' : '';
    });

    // Close menu when clicking outside
    document.addEventListener('click', (e) => {
      if (!glassMenu.contains(e.target) && !hamburger.contains(e.target)) {
        hamburger.classList.remove('active');
        glassMenu.classList.remove('active');
        document.body.style.overflow = '';
      }
    });

    // Close menu when clicking a link
    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        hamburger.classList.remove('active');
        glassMenu.classList.remove('active');
        document.body.style.overflow = '';
      });
    });
  }

  // Smooth scroll for nav links
  navLinks.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      const target = link.getAttribute('href');
      if (target.startsWith('#')) {
        smoothScroll(target);
      }
    });
  });

  // Navbar scroll effect
  if (navbar) {
    let lastScroll = 0;
    window.addEventListener('scroll', () => {
      const currentScroll = window.pageYOffset;
      if (currentScroll > 50) {
        navbar.classList.add('scrolled');
      } else {
        navbar.classList.remove('scrolled');
      }
      lastScroll = currentScroll;
    });
  }

  // Active nav link on scroll
  const sections = document.querySelectorAll('section[id]');
  window.addEventListener('scroll', () => {
    const scrollPosition = window.pageYOffset + 120;

    sections.forEach(section => {
      const sectionTop = section.offsetTop;
      const sectionHeight = section.offsetHeight;
      const sectionId = section.getAttribute('id');

      if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
        navLinks.forEach(link => {
          link.classList.remove('active');
          if (link.getAttribute('href') === `#${sectionId}`) {
            link.classList.add('active');
          }
        });
      }
    });
  });
}

// ============================================
// BACK TO TOP BUTTON
// ============================================

function initBackToTop() {
  const backToTopBtn = document.getElementById('backToTop');
  if (!backToTopBtn) return;

  window.addEventListener('scroll', () => {
    if (window.pageYOffset > 400) {
      backToTopBtn.classList.add('visible');
    } else {
      backToTopBtn.classList.remove('visible');
    }
  });

  backToTopBtn.addEventListener('click', () => {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });
}

// ============================================
// NEWSLETTER FORM
// ============================================

function initNewsletter() {
  const form = document.getElementById('newsletterForm');
  if (!form) return;

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    const input = form.querySelector('.newsletter-input');
    const email = input.value.trim();

    if (email) {
      // Here you would typically send the email to your backend
      alert('Thank you for subscribing! We\'ll keep you updated with our latest offers.');
      input.value = '';
    }
  });
}

// ============================================
// INITIALIZATION
// ============================================

// ============================================
// PRODUCT MODAL FUNCTIONALITY
// ============================================

function openProductModal(comboId) {
  const combo = combosData.find(c => c.id === comboId);
  if (!combo) return;

  const modal = document.getElementById('productModal');
  const modalBody = document.getElementById('productModalBody');
  
  // Use the images array if available, otherwise use the main image 5 times
  const images = combo.images || [
    combo.image,
    combo.image,
    combo.image,
    combo.image,
    combo.image
  ];
  
  modalBody.innerHTML = `
    <div class="product-details">
      <div class="product-details__image-section">
        <div class="product-image__main-wrapper" id="mainImageWrapper">
          <img src="${images[0]}" alt="${combo.title}" class="product-details__image" id="mainProductImage">
          <div class="zoom-indicator">Click to zoom</div>
        </div>
        <div class="product-image__thumbnails">
          ${images.map((img, index) => `
            <div class="thumbnail-item ${index === 0 ? 'active' : ''}" onclick="changeMainImage(${index}, '${img}')">
              <img src="${img}" alt="${combo.title} - View ${index + 1}" class="thumbnail-image">
            </div>
          `).join('')}
        </div>
      </div>
      <div class="product-details__info">
        <div class="product-details__header">
          <div class="product-details__brand">ELITE KITCHEN</div>
          <h1 class="product-details__title">${combo.title}</h1>
          <div class="product-details__code">${combo.id}</div>
        </div>
        
        <div class="product-details__description">
          <h3 class="product-details__section-title">Product Details</h3>
          <p class="product-details__text">${combo.description}</p>
        </div>
        
        <div class="product-details__price-section">
          <div class="product-details__price-label">Price</div>
          <div class="product-details__price">‚Çπ${combo.price}</div>
        </div>
        
        <div class="product-details__actions">
          <a href="${generateWhatsAppLink(combo.whatsappMessage)}" 
             target="_blank" 
             rel="noopener noreferrer"
             class="product-details__cta product-details__cta--primary">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
            </svg>
            Buy Now
          </a>
        </div>
      </div>
    </div>
  `;
  
  // Initialize zoom functionality
  initImageZoom();
  
  modal.classList.add('active');
  document.body.classList.add('modal-open');
  document.body.style.overflow = 'hidden';
}

function changeMainImage(index, imageUrl) {
  const mainImage = document.getElementById('mainProductImage');
  const thumbnails = document.querySelectorAll('.thumbnail-item');
  
  if (mainImage) {
    mainImage.src = imageUrl;
  }
  
  thumbnails.forEach((thumb, i) => {
    thumb.classList.toggle('active', i === index);
  });
}

function initImageZoom() {
  const mainImageWrapper = document.getElementById('mainImageWrapper');
  const mainImage = document.getElementById('mainProductImage');
  
  if (!mainImageWrapper || !mainImage) return;
  
  let isZoomed = false;
  let currentZoom = 1;
  
  mainImageWrapper.addEventListener('click', (e) => {
    if (isZoomed) {
      // Reset zoom
      mainImage.style.transform = 'scale(1)';
      mainImage.style.cursor = 'zoom-in';
      isZoomed = false;
      currentZoom = 1;
    } else {
      // Zoom in
      const rect = mainImageWrapper.getBoundingClientRect();
      const x = ((e.clientX - rect.left) / rect.width) * 100;
      const y = ((e.clientY - rect.top) / rect.height) * 100;
      
      mainImage.style.transformOrigin = `${x}% ${y}%`;
      mainImage.style.transform = 'scale(2.5)';
      mainImage.style.cursor = 'zoom-out';
      isZoomed = true;
      currentZoom = 2.5;
    }
  });
  
  // Mouse wheel zoom
  mainImageWrapper.addEventListener('wheel', (e) => {
    e.preventDefault();
    const delta = e.deltaY > 0 ? -0.1 : 0.1;
    currentZoom = Math.max(1, Math.min(3, currentZoom + delta));
    
    if (currentZoom > 1) {
      const rect = mainImageWrapper.getBoundingClientRect();
      const x = ((e.clientX - rect.left) / rect.width) * 100;
      const y = ((e.clientY - rect.top) / rect.height) * 100;
      
      mainImage.style.transformOrigin = `${x}% ${y}%`;
      mainImage.style.transform = `scale(${currentZoom})`;
      mainImage.style.cursor = 'zoom-out';
      isZoomed = true;
    } else {
      mainImage.style.transform = 'scale(1)';
      mainImage.style.cursor = 'zoom-in';
      isZoomed = false;
    }
  });
}

function closeProductModal() {
  const modal = document.getElementById('productModal');
  modal.classList.remove('active');
  document.body.classList.remove('modal-open');
  document.body.style.overflow = '';
}

// Close modal on Escape key
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    closeProductModal();
  }
});

document.addEventListener('DOMContentLoaded', () => {
  renderCombos();
  renderTestimonials();
  initNavigation();
  initBackToTop();
  initNewsletter();
  observeElements();
});


